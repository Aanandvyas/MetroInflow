# Database Schema to Frontend Code Mapping

This document outlines how database fields map to frontend code in the MetroInflow application.

## Table: users
- **email** (text) - Not currently used in upload flow
- **name** (text) - Not currently used in upload flow
- **gender** (text) - Not currently used in upload flow
- **phone_number** (numeric) - Not currently used in upload flow
- **address** (text) - Not currently used in upload flow
- **dob** (date) - Not currently used in upload flow
- **age** (int2) - Not currently used in upload flow
- **uuid** (uuid) - Primary key, referenced via `user.id` from auth context
- **d_uuid** (uuid) - Foreign key to department
- **r_uuid** (uuid) - Foreign key to roles

## Table: file
- **f_name** (text) - Set via `metadata.f_name` when uploading single file with title
- **language** (text) - Set via `metadata.language` from language dropdown
- **f_uuid** (uuid) - Primary key, generated by backend
- **uuid** (uuid) - Foreign key to users (currently not used in backend insert query)
- **d_uuid** (uuid) - Foreign key to department, set via `d_uuid` form parameter
- **file_path** (text) - Generated by backend
- **created_at** (timestamptz) - Set by backend
- **status** (text) - Set by backend
- **uploaded_at** (timestamptz) - Set by backend

## Table: department
- **d_name** (varchar) - Used in UI as `dept.d_name`
- **d_uuid** (uuid) - Primary key, used as `dept.d_uuid`

## Table: file_department
- **fd_uuid** (uuid) - Primary key, generated by backend
- **f_uuid** (uuid) - Foreign key to file, managed by backend
- **d_uuid** (uuid) - Foreign key to department, managed by backend
- **created_at** (timestamptz) - Set by backend

## Table: notifications
- **notif_id** (uuid) - Primary key, generated by backend
- **uuid** (uuid) - Foreign key to users
- **f_uuid** (uuid) - Foreign key to file
- **is_seen** (bool) - Set by backend/notification utils
- **created_at** (timestamp) - Set by backend
- **is_sent** (bool) - Set by backend

## Form Parameters to API Endpoint (POST /v1/documents)

| Form Parameter | Database Field | Description |
|---------------|----------------|-------------|
| `files` | N/A | File objects to upload (handled by backend) |
| `d_uuid` | `file.d_uuid` | Department UUID |
| `f_name` | `file.f_name` | Optional title for file (used if provided) |
| `language` | `file.language` | Language of the document |

## Notes
- The backend currently only accepts one department UUID at a time
- The backend doesn't use the `uuid` (user ID) in the file insert query
- File names are used as titles if no custom title is provided
- The backend generates file paths, timestamps, and status values automatically
